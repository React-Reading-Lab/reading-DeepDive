## useState

ìƒíƒœë¥¼ ì •ì˜í•˜ê³  ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›…ì´ë‹¤. ì‹¤ì œë¡œëŠ” useReducerë¥¼ ì´ìš©í•´ êµ¬í˜„ë˜ì–´ ìˆë‹¤.

```jsx
import { useState } from 'react'

const [state, useState] = useState(initialState)
```


> ğŸ‘‰ **ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”ë€?**
>
> useStateì— ì›ì‹œê°’ì´ ì•„ë‹Œ íŠ¹ì •í•œ ê°’ì„ returní•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ë©´ stateê°€ ì²˜ìŒ ë§Œë“¤ì–´ì§ˆ ë•Œë§Œ ì‚¬ìš©ë˜ê³  ì´í›„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•  ë•Œ í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ë¬´ì‹œëœë‹¤. localStorage, sessionStorageì— ì ‘ê·¼í•˜ê±°ë‚˜ map, filter, find, í˜¹ì€ ì´ˆê¸°ê°’ ê³„ì‚°ì„ ìœ„í•´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‹¤ê³  í•œë‹¤.

> â“ p.193 ì§ˆë¬¸
>
> indexë¥¼ í´ë¡œì €ë¡œ ê°€ë‘¬ë‘ëŠ” ê²ƒ ê°™ì§€ ì•Šì€ë° useState í›…ë³„ë¡œ index ê°’ì´ ìœ ì§€ê°€ ë˜ëŠ” ê²ƒì¸ê°€?

```jsx
// const currentIndex = index; ì´ëŸ° ì¤„ì´ ì—†ì–´ë„ ë˜ë‚˜?
const currentState = global.states[index] || initialState;
```

</aside>

## useEffect

useEffectë¡œ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸°ì™€ ë¹„ìŠ·í•œ ì‘ë™ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ê³  í•˜ì§€ë§Œ ì‚¬ì‹¤ useEffectëŠ” ë‹¨ìˆœíˆ ë Œë”ë§ì„í•  ë•Œë§ˆë‹¤ ì˜ì¡´ì„± ë°°ì—´ ë‚´ì˜ ê°’ì„ ì–•ì€ ë¹„êµí–ˆì„ ë•Œ ë³€ê²½ ì‚¬í•­ì´ ë°œìƒí•˜ë©´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ë‹¤.

```jsx
useEffect(callback, [ì˜ì¡´ì„± ë°°ì—´]);
```

### í´ë¦°ì—… í•¨ìˆ˜ë€?

í”í•˜ê²Œë“¤ useEffectì—ì„œ ë°˜í™˜ë˜ëŠ” í•¨ìˆ˜ëŠ” í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì²˜ëŸ¼ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ë¡œ ì•Œê³  ìˆëŠ” ê²½ìš°ê°€ ë§ë‹¤. 

ê·¸ëŸ¬ë‚˜ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë‹¨ìˆœíˆ ì¡´ì¬í•˜ë©´ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ì—ˆì„ ë•Œ ì½œë°±ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì´ì „ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ë’¤ ì½œë°±ì„ ì‹¤í–‰í•œë‹¤. useEffectë„ ê²°êµ­ ì˜ì¡´ì„±ì— ë”°ë¼ ë°˜ë³µì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•´ë‘ë©´ ë©”ëª¨ë¦¬ ì–´ì©Œê³  í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì½œë°±ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ì´ë²¤íŠ¸ í—¨ë“¤ëŸ¬ë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ë‹¤.

```jsx
useEffect(() => {
	function addMouseEvent() {}
	window.addEventListener('click', addMouseEvent);
	
	return () => {
		window.removeEventListener('click', addMouseEvent)
	}
}, []);
```

### ì˜ì¡´ì„± ë°°ì—´

ì˜ì¡´ì„± ë°°ì—´ì„ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ëœë‹¤. ê·¸ëŸ¬ë©´ useEffectë¥¼ ì™œ ì“°ëŠ”ê°€ ì‹¶ì§€ë§Œ ê·¸ë˜ë„ useEffectë¥¼ ì¨ì•¼í•˜ëŠ” ê²½ìš°ëŠ” ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ì„ í•  ë•Œ useEffectëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ useEffectë‚´ë¶€ì—ì„œ windowê°ì²´ì— ì ‘ê·¼í•´ë„ ë˜ê³ , useEffectëŠ” ë Œë”ë§ ì´í›„ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ë¬´ê±°ìš´ ì—°ì‚° ì‘ì—…ì˜ ê²½ìš° useEffectë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ì»´í¬ë„ŒíŠ¸ ë°˜í™˜ì„ ì§€ì—°ì‹œí‚¤ì§€ ì•Šì„ ê²ƒì´ë‹¤.

> â“ p.203 ì§ˆë¬¸
>
> index++ ì™œ ë”í•˜ëŠ”ê±°ì§€?

ì»´í¬ë„ŒíŠ¸ ì²« ë Œë”ë§ ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ useEffect ì½œë°±ìœ¼ë¡œ ë„˜ê¸°ê³  ì˜ì¡´ì„± ë°°ì—´ì— ë¹ˆ ë°°ì—´ì„ ë„˜ê¸¸ ìˆ˜ë„ ìˆì§€ë§Œ ì´ëŠ” ì§€ì–‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì™œëƒí•˜ë©´ useEffectì˜ íë¦„ê³¼ ì»´í¬ë„ŒíŠ¸ propsë‚˜ ê¸°íƒ€ ì†ì„±ì˜ íë¦„ì´ ë§ì§€ ì•Šì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ useEffectì˜ ë¶€ìˆ˜ íš¨ê³¼ê°€ ì •ë§ ì»´í¬ë„ŒíŠ¸ ìƒíƒœì™€ ë³„ê°œë¡œ ë™ì‘í•˜ëŠ”ì§€ ê²€í† í•  í•„ìš”ê°€ ìˆë‹¤.

- ë˜í•œ useEffectí•¨ìˆ˜ì— ê¸°ëª… í•¨ìˆ˜ë¥¼ ë„˜ê¸°ë©´ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.
- ê·¸ë¦¬ê³  useEffectëŠ” ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì˜ì¡´ì„± ë°°ì—´ì— ì—¬ëŸ¬ ê°’ì„ ë„£ì„ ë°”ì—” ì—¬ëŸ¬ useEffectë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ê·¸ë¦¬ê³  useEffect ë‚´ë¶€ì—ì„œë§Œ ì‹¤í–‰ë  í•¨ìˆ˜ëŠ” ì™¸ë¶€ í•¨ìˆ˜ë¡œ ë§Œë“¤ì§€ ë§ê³  í›… ë‚´ë¶€ì—ì„œ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²Œ ê°€ë…ì„± ì¸¡ë©´ì—ì„œ ì¢‹ë‹¤.

ë˜í•œ useEffectëŠ” ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì¼ìœ¼í‚¤ë©° ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚¤ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì½œë°±ìœ¼ë¡œ ë„£ì„ ìˆ˜ ì—†ë‹¤. ì™œëƒí•˜ë©´ ìì¹«í•˜ë‹¨ useEffectë¡œ ë¦¬ë Œë”ë§ì„ ìš”ì²­í•œ ê²Œ ì´ì „ ìš”ì²­ì´ ë” ì˜¤ë˜ê±¸ë¦¬ë©´ ë‹¤ìŒ ìš”ì²­ì— ë”°ë¥¸ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ë„ ì´ì „ ìš”ì²­ì— ë”°ë¼ ë¦¬ë Œë”ë§ ë˜ë©´ì„œ ê²½ìŸ ìƒíƒœê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

## useMemo / useCallback

useMemoëŠ” ë¹„ìš©ì´ í° ì—°ì‚°ì„ ì €ì¥í•´ë‘ê³  ì €ì¥ëœ ê°’ì„ ë°˜í™˜í•˜ëŠ” í›…ì´ë‹¤. useCallbackì€ ì¸ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ ì½œë°±ì„ ê¸°ì–µí•œë‹¤. ì‚¬ì‹¤ ë‘˜ë‹¤ ê°’ì„ ì €ì¥í•´ë‘”ë‹¤ëŠ” ë™ì¼í•œ ê¸°ëŠ¥ì„ í•œë‹¤.

```jsx
import { useMemo } from 'react'

const memoizedValue = useMemo(() => expensiveComputation(a, b), [a, b])
```

## useRef

useRefëŠ” stateì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ê°’ì„ ì €ì¥í•´ë‘˜ ìˆ˜ ìˆì§€ë§Œ ê°’ì´ ë³€ê²½í•´ë„ ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤. ì£¼ë¡œ dom ìš”ì†Œì— ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë‚´ë¶€ì ìœ¼ë¡œëŠ” useMemoë¡œ êµ¬í˜„ë˜ì–´ ìˆì„ ìˆ˜ ìˆë‹¤.

## useContext

props drillingì„ ë°©ì§€í•  ìˆ˜ ìˆëŠ” í›…ì´ë‹¤. ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë§Œë“¤ì–´ì§„ Contextë¥¼ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì§„ í›…ì´ë‹¤. useContextë¥¼ ì‚¬ìš©í•˜ë©´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„ ì–¸ëœ context.providerì—ì„œ ì œê³µí•œ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ë§Œì•½ providerê°€ ì—¬ëŸ¬ ê°œë¼ë©´ ê°€ì¥ ê°€ê¹Œìš´ provider ê°’ì„ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.

> ğŸ‘‰ useContext vs ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬?
>
> ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìƒíƒœ ë³€í™”ë¥¼ ìµœì í™”í•  ìˆ˜ ìˆì–´ì•¼í•˜ê³  ì–´ë– í•œ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ë¥¸ ìƒíƒœë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

## useReducer

useReducerëŠ” useReactì˜ ì‹¬í™”ë²„ì „ì´ë‹¤. ë³µì¡í•œ stateë¥¼ ì‚¬ì „ì— ì •ì˜í•˜ê³  dispatcherë¡œë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.

```jsx
const [state, dispatcher] = useReducer(reducer, initialState, init)
```

## useImperativeHandle

React.forwardRefì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©° ë¶€ëª¨ê°€ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•´ì•¼í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```tsx
import { useImperativeHandle, forwardRef, useRef } from 'react';

const MyInput = forwardRef((props, ref) => {
  const inputRef = useRef<HTMLInputElement>(null);

  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current?.focus();
    }
  }));

  return <input ref={inputRef} />;
});

const Parent = () => {
  const inputRef = useRef<{ focus: () => void }>(null);

  return (
    <><MyInput ref={inputRef} />
      <button onClick={() => inputRef.current?.focus()}>Focus Input</button>
    </>
  );
};

```

## useLayoutEffect

useEffectì™€ ì‹œê·¸ë‹ˆì²˜ëŠ” ë™ì¼í•˜ë‚˜ ëª¨ë“  DOMì˜ ë³€ê²½ í›„ì— ë™ê¸°ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” í›…ì´ë‹¤. ê·¸ëŸ¬ë‚˜ `useEffect`ëŠ” í™”ë©´ì— ê·¸ë¦° í›„ ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë˜ì§€ë§Œ, `useLayoutEffect`ëŠ” í™”ë©´ ê·¸ë¦¬ê¸° ì „ì— ë™ê¸°ë¡œ ì‹¤í–‰ëœë‹¤. ê·¸ë˜ì„œ í™”ë©´ì— ê¹œë¹¡ì„ ì—†ì´ ë ˆì´ì•„ì›ƒ ìˆ˜ì •ì´ë‚˜ í¬ê¸° ì¸¡ì •, ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì • ë“±ì„ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

1. DOM ì—…ë°ì´íŠ¸
2. useLayoutEffect ì‹¤í–‰
3. ë¸Œë¼ìš°ì €ì— ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜
4. useEffectë¥¼ ì‹¤í–‰

## useDebugValue

ì»¤ìŠ¤í…€ í›…ì„ ë””ë²„ê¹…í•  ë•Œ **React DevTools**ì—ì„œ ì»¤ìŠ¤í…€ í›…ì˜ ìƒíƒœë‚˜ ê°’ì„ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œí•˜ëŠ” ë° ì“´ë‹¤. ì˜¤ì§ ë‹¤ë¥¸ í›… ë‚´ë¶€ì—ì„œë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í›…ì´ë‹¤.

```tsx

import { useState, useDebugValue } from 'react';

const useFriendStatus = (friendID: string) => {
  const [isOnline, setIsOnline] = useState(false);
  useDebugValue(isOnline ? 'Online' : 'Offline');

  return isOnline;
};
```

## í›…ì˜ ê·œì¹™

1. ìµœìƒìœ„ì—ì„œë§Œ í›…ì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤.ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸, ì¤‘ì²©ëœ í•¨ìˆ˜ ë‚´ì—ì„œ í›…ì„ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤. ì´ ê·œì¹™ì„ ë”°ë¼ì•¼ë§Œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ í•­ìƒ ë™ì¼í•œ ìˆœì„œë¡œ í›…ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.
2. í›…ì„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸, í˜¹ì€ ì‚¬ìš©ì ì •ì˜ í›… ë‘ê°€ì§€ ê²½ìš°ë¿ì´ë‹¤. ì¼ë°˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ì—ì„œëŠ” í›…ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

# ì‚¬ìš©ì ì •ì˜ í›…ê³¼ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸

## ì‚¬ìš©ì ì •ì˜ í›…

- useë¡œ ì‹œì‘í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤. (useë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ eslintì—ì„œ ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ë„ ìˆë‹¤.)
- ë³µì¡í•˜ê³  ë°˜ë³µë˜ëŠ” ë¡œì§ì„ ì‚¬ìš©ì ì •ì˜ í›…ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ê³  í•„ìš”í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ë‹¨ìˆœíˆ useEffect, useStateì™€ ê°™ì´ ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” í›…ìœ¼ë¡œë§Œ ê³µí†µ ë¡œì§ì„ ê²©ë¦¬í•  ìˆ˜ ìˆë‹¤ë©´ ì‚¬ìš©ì ì •ì˜ í›…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## ê³ ì°¨ ì»´í¬ë„ŒíŠ¸

- ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ ìì²´ì˜ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ë‹¤. (ê³ ì°¨ í•¨ìˆ˜ì˜ ì¼ì¢…)
- ê³µí†µ ë¡œì§ì´ ë Œë”ë§ì˜ ê²°ê³¼ì—ë„ ì˜í–¥ì„ ë¯¸ì¹œë‹¤ë©´ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ ê³µí†µí™”ëœ ë Œë”ë§ ë¡œì§ì„ ì²˜ë¦¬í•˜ê¸°ì— ì¢‹ë‹¤.

```jsx
const ChildComponent = memo(({value}) => {
	useEffect(() => { console.log('ë Œë”ë§) });
	
	return <>ì•ˆë…•í•˜ì„¸ìš”! {value}</>;
});
```

> useMemoë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ ê·¸ëŸ¬ë©´ JSX í•¨ìˆ˜ ë°©ì‹ì´ ì•„ë‹Œ {}ë¥¼ ì‚¬ìš©í•œ í• ë‹¹ì‹ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

### ê³ ì°¨ í•¨ìˆ˜ ë§Œë“¤ê¸°

```jsx
const setState = (function () {
	let currentIndex = index
	return function(value) {
		global.states[currentIndex] = value
	}
});
```

### ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

```jsx
function withLoginComponent<T>(Component) {
	return function(props) {
		const { loginRequired, ...restProps } = props
		
		if (loginRequired) return <>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</>
		
		return <Component {...(restProps as T)}/>
	}
}
```
